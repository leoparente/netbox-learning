version: '3.8'

services:
  netbox-napalm:
    build:
      context: .
      dockerfile: Dockerfile
    volumes:
      - .:/app
    environment:
      - NETBOX_URL=https://mark.cloud.netboxapp.com/
      - NETBOX_TOKEN=7a1dd55700fb60864c96ba573acb0760d4752b72
      - NAPALM_USERNAME=admin
      - NAPALM_PASSWORD=admin
    networks:
      - autocon_workshop  # Ensure it's the correct network name
    command: ["fiber", "plane"]

networks:
  autocon_workshop:
    external: true